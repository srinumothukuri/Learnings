(function(a){if(typeof exports==="object"){module.exports=a(typeof angular!=="undefined"?angular:require("angular"),typeof Chart!=="undefined"?Chart:require("Chart.js"))}else{if(typeof define==="function"&&define.amd){define(["angular","Chart.js"],a)}else{a(angular,Chart)}}}(function(c,a){a.defaults.global.responsive=true;a.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>";a.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var e=typeof window.G_vmlCanvasManager==="object"&&window.G_vmlCanvasManager!==null&&typeof window.G_vmlCanvasManager.initElement==="function";if(e){a.defaults.global.animation=false}return c.module("Chart.js",[]).provider("ChartJs",b).factory("ChartJsFactory",["ChartJs","$timeout",d]).directive("chartBase",["ChartJsFactory",function(f){return new f()}]).directive("chartLine",["ChartJsFactory",function(f){return new f("Line")}]).directive("chartBar",["ChartJsFactory",function(f){return new f("Bar")}]).directive("chartRadar",["ChartJsFactory",function(f){return new f("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(f){return new f("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(f){return new f("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(f){return new f("PolarArea")}]);function b(){var f={};var g={Chart:a,getOptions:function(h){var i=h&&f[h]||{};return c.extend({},f,i)}};this.setOptions=function(i,h){if(!h){h=i;f=c.extend(f,h);return}f[i]=c.extend(f[i]||{},h)};this.$get=function(){return g}}function d(f,w){return function q(y){return{restrict:"CA",scope:{data:"=?",labels:"=?",options:"=?",series:"=?",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=?",hover:"=?",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColours:"=?",chartLegend:"@",chartClick:"=?",chartHover:"=?"},link:function(D,F){var C,z=document.createElement("div");z.className="chart-container";F.replaceWith(z);z.appendChild(F[0]);if(e){window.G_vmlCanvasManager.initElement(F[0])}["data","labels","options","series","colours","legend","click","hover"].forEach(A);function B(I,H){D.$watch(I,function(J){if(typeof J==="undefined"){return}D[H]=J})}B("chartData","data");B("chartLabels","labels");B("chartOptions","options");B("chartSeries","series");B("chartColours","colours");B("chartLegend","legend");B("chartClick","click");B("chartHover","hover");D.$watch("data",function(I,H){if(!I||!I.length||(Array.isArray(I[0])&&!I[0].length)){return}var J=y||D.chartType;if(!J){return}if(C){if(k(I,H)){return m(C,I,D,F)}C.destroy()}E(J)},true);D.$watch("series",G,true);D.$watch("labels",G,true);D.$watch("options",G,true);D.$watch("colours",G,true);D.$watch("chartType",function(I,H){if(p(I)){return}if(c.equals(I,H)){return}if(C){C.destroy()}E(I)});D.$on("$destroy",function(){if(C){C.destroy()}});function G(I,H){if(p(I)){return}if(c.equals(I,H)){return}var J=y||D.chartType;if(!J){return}if(C){C.destroy()}E(J)}function E(J){if(r(J,D)&&F[0].clientHeight===0&&z.clientHeight===0){return w(function(){E(J)},50,false)}if(!D.data||!D.data.length){return}D.getColour=typeof D.getColour==="function"?D.getColour:s;D.colours=h(J,D);var L=F[0],H=L.getContext("2d");var K=Array.isArray(D.data[0])?o(D.labels,D.data,D.series||[],D.colours):n(D.labels,D.data,D.colours);var I=c.extend({},f.getOptions(J),D.options);C=new f.Chart(H)[J](K,I);D.$emit("create",C);L.onclick=D.click?t(D,C,"click",false):c.noop;L.onmousemove=D.hover?t(D,C,"hover",true):c.noop;if(D.legend&&D.legend!=="false"){u(F,C)}}function A(H){if(typeof console!=="undefined"&&f.getOptions().env!=="test"){var I=typeof console.warn==="function"?console.warn:console.log;if(!!D[H]){I.call(console,'"%s" is deprecated and will be removed in a future version. Please use "chart-%s" instead.',H,H)}}}}}};function k(z,y){if(z&&y&&z.length&&y.length){return Array.isArray(z[0])?z.length===y.length&&z.every(function(B,A){return B.length===y[A].length}):y.reduce(g,0)>0?z.length===y.length:false}return false}function g(y,z){return y+z}function t(B,A,C,z){var y=null;return function(D){var F=A.getPointsAtEvent||A.getBarsAtEvent||A.getSegmentsAtEvent;if(F){var E=F.call(A,D);if(z===false||c.equals(y,E)===false){y=E;B[C](E,D);B.$apply()}}}}function h(z,y){var A=c.copy(y.colours||f.getOptions(z).colours||a.defaults.global.colours);while(A.length<y.data.length){A.push(y.getColour())}return A.map(x)}function x(y){if(typeof y==="object"&&y!==null){return y}if(typeof y==="string"&&y[0]==="#"){return l(v(y.substr(1)))}return s()}function s(){var y=[i(0,255),i(0,255),i(0,255)];return l(y)}function l(y){return{fillColor:j(y,0.2),strokeColor:j(y,1),pointColor:j(y,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:j(y,0.8)}}function i(z,y){return Math.floor(Math.random()*(y-z+1))+z}function j(z,y){if(e){return"rgb("+z.join(",")+")"}else{return"rgba("+z.concat(y).join(",")+")"}}function v(B){var C=parseInt(B,16),A=(C>>16)&255,z=(C>>8)&255,y=C&255;return[A,z,y]}function o(B,z,y,A){return{labels:B,datasets:z.map(function(D,C){return c.extend({},A[C],{label:y[C],data:D})})}}function n(A,y,z){return A.map(function(B,C){return c.extend({},z[C],{label:B,value:y[C],color:z[C].strokeColor,highlight:z[C].pointHighlightStroke})})}function u(B,A){var C=B.parent(),y=C.find("chart-legend"),z="<chart-legend>"+A.generateLegend()+"</chart-legend>";if(y.length){y.replaceWith(z)}else{C.append(z)}}function m(A,y,z,B){if(Array.isArray(z.data[0])){A.datasets.forEach(function(D,C){(D.points||D.bars).forEach(function(F,E){F.value=y[C][E]})})}else{A.segments.forEach(function(D,C){D.value=y[C]})}A.update();z.$emit("update",A);if(z.legend&&z.legend!=="false"){u(B,A)}}function p(y){return !y||(Array.isArray(y)&&!y.length)||(typeof y==="object"&&!Object.keys(y).length)}function r(A,z){var y=c.extend({},a.defaults.global,f.getOptions(A),z.options);return y.responsive}}}));